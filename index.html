<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors</title>
    <!-- Viewport Tag for media queries in Bootstrap -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Link to firebase -->
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
    <!-- Link to Boostrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <!-- link to css -->
    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
    <!-- jQuery library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="row" id="header">
        <div class="col-md-6" id="title">
            <h1>rock paper scissors</h1>
        </div>

        <div class="col-md-6">
            <form id="inputForm">
                <!-- text box -->
                <input type="text" id="textBox" style="opacity: 0.5" placeholder="Enter name to play!">
                <!-- submit button -->
                <button id="loginButton">SUBMIT</button>
            </form>
        </div>
        <div class="col-3"></div>
    </div>

    <div class="container">
        <div class="row game-row">
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="waiting waiting-1">Waiting for player 1</h5>
                        <div class="moves moves-1">
                            <p class="move" data-choice="r" data-text="rock" role="button">rock</p>
                            <p class="move" data-choice="p" data-text="paper" role="button">paper</p>
                            <p class="move" data-choice="s" data-text="scissors" role="button">scissors</p>
                        </div>
                        <p class="choice choice-1"></p>
                    </div>
                    <p class="win-loss win-loss-1"></p>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Results</h5>
                        <p class="turn"></p>
                        <p class="winner"></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="waiting waiting-2">Waiting for player 2</h5>
                        <div class="moves moves-2">
                            <p class="move" data-choice="r" data-text="rock" role="button">rock</p>
                            <p class="move" data-choice="p" data-text="paper" role="button">paper</p>
                            <p class="move" data-choice="s" data-text="scissors" role="button">scissors</p>
                        </div>
                        <p class="choice choice-2"></p>
                    </div>
                    <p class="win-loss win-loss-2"></p>
                </div>
            </div>
        </div>
    </div>
    <!-- /container -->




    <!--<script>
        
        $("#loginButton").click(function (e) {
            e.preventDefault();
            
            
            firebase.auth().signInAnonymously().catch(function (error) {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log("Code:" + errorCode);
                console.log("errorMessage:" + errorMessage)
            });

            firebase.auth().onAuthStateChanged(function (user) {
                if (user) {
                    // User is signed in.
                    var isAnonymous = user.isAnonymous;
                    var uid = user.uid;
                    console.log(uid + ' is signed in yo');
                    console.log(user);

                } else {
                    console.log('user is not signed in');
                }
            });

            if (playerOne.loggedIn === false) {
                
                firebase.auth().signInAnonymously();
                firebase.auth().createuser;
                playerOne.name = $("#textBox").val();

                playerOne.loggedIn = true;

                database.ref().set({
                    playerOne: playerOne.name,
                    playerTwo: '',
                    playerOneWins: 0,
                    playerTwoWins: 0,
                })

            } else if (playerOne.loggedIn === true && playerTwo.loggedIn === false) {
                firebase.auth().signInAnonymously();
                playerTwo.name = $("#textBox").val();
                playerTwo.loggedIn = true;

                database.ref().set({
                    playerOne: playerOne.name,
                    playerTwo: playerTwo.name,
                    playerOneWins: 0,
                    playerTwoWins: 0,
                })
            } else {
                // do nothing
            }
        });

        database.ref().on("value", function (snapshot) {
            console.log(Object.keys(snapshot.val()));
            $("#player1").html(snapshot.val().playerOne);
            $("#player2").html(snapshot.val().playerTwo);
            if ($("#player1").html() === '') {
                $("#player1").html("Waiting for player 1");
            }
            if ($("#player2").html() === '') {
                $("#player2").html("Waiting for player 2");
            }
        });

        window.addEventListener('unload', function (event) {
            firebase.auth().signOut().then(function () {
                console.log('Signed Out');
            }, function (error) {
                console.error('Sign Out Error', error);
            });

            playerOne.name = '';
            playerTwo.name = '';
            database.ref().set({
                playerOne: '',
                playerTwo: '',
                playerOneWins: 0,
                playerTwoWins: 0,
            })
            playerOne.loggedIn = false;
            playerTwo.loggedIn = false;
        });
    </script> -->

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>
    <!-- link to JavaScript -->
    <script src="assets/javascript/app.js"></script>
</body>

</html>